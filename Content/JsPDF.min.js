function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ;a=self;b=a.WebSharper=a.WebSharper||{};c=b.JsPDF=b.JsPDF||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.Operators=b.Operators||{};g=b.Obj=b.Obj||{};h=b.UI=b.UI||{};i=h.Templating=h.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.TemplateInstance=k.TemplateInstance||{};m=b.Arrays=b.Arrays||{};n=k.ProviderBuilder=k.ProviderBuilder||{};o=k.Handler=k.Handler||{};p=a.JsPDF_Templates=a.JsPDF_Templates||{};q=h.HtmlModule=h.HtmlModule||{};r=q.attr=q.attr||{};s=b.Collections=b.Collections||{};t=s.List=s.List||{};u=b.Unchecked=b.Unchecked||{};v=a.System=a.System||{};w=v.Guid=v.Guid||{};x=s.Dictionary=s.Dictionary||{};y=s.HashSet=s.HashSet||{};z=j.Client=j.Client||{};A=b.Seq=b.Seq||{};B=h.Var$1=h.Var$1||{};C=h.Client=h.Client||{};D=C.Templates=C.Templates||{};E=h.Doc=h.Doc||{};F=b.JavaScript=b.JavaScript||{};G=F.Pervasives=F.Pervasives||{};H=h.AttrProxy=h.AttrProxy||{};I=a.Object;J=s.DictionaryUtil=s.DictionaryUtil||{};K=b.Enumerator=b.Enumerator||{};L=K.T=K.T||{};M=h.Var=h.Var||{};N=h.ConcreteVar=h.ConcreteVar||{};O=h.Snap=h.Snap||{};P=h.View=h.View||{};Q=h.CheckedInput=h.CheckedInput||{};R=b.Numeric=b.Numeric||{};S=a.EventTarget;T=a.Node;U=F.JS=F.JS||{};V=h.DomUtility=h.DomUtility||{};W=h.Attrs=h.Attrs||{};X=h.Abbrev=h.Abbrev||{};Y=X.Fresh=X.Fresh||{};Z=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_0=a.WindowOrWorkerGlobalScope;_1=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_2=h.Docs=h.Docs||{};_3=h.DocElemNode=h.DocElemNode||{};_4=a.CharacterData;_5=h.Elt=h.Elt||{};_6=D.Prepare=D.Prepare||{};_7=b.Slice=b.Slice||{};_8=s.KeyCollection=s.KeyCollection||{};_9=h.An=h.An||{};_=C.Settings=C.Settings||{};$=X.Mailbox=X.Mailbox||{};ba=h.Array=h.Array||{};bb=s.HashSetUtil=s.HashSetUtil||{};bc=C.Attrs=C.Attrs||{};bd=bc.Dyn=bc.Dyn||{};be=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bf=h.AttrModule=h.AttrModule||{};bg=b.List=b.List||{};bh=bg.T=bg.T||{};bi=b.Strings=b.Strings||{};bj=h.Updates=h.Updates||{};bk=C.Docs=C.Docs||{};bl=bk.RunState=bk.RunState||{};bm=bk.NodeSet=bk.NodeSet||{};bn=h.Anims=h.Anims||{};bo=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bp=h.String=h.String||{};bq=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};br=b.Concurrency=b.Concurrency||{};bs=h.AppendList=h.AppendList||{};bt=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bu=b.Char=b.Char||{};bv=h.DynamicAttrNode=h.DynamicAttrNode||{};bw=h.Easing=h.Easing||{};bx=br.AsyncBody=br.AsyncBody||{};by=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bz=br.CT=br.CT||{};bA=X.HashSet=X.HashSet||{};bB=br.Scheduler=br.Scheduler||{};bC=b.CancellationTokenSource=b.CancellationTokenSource||{};bD=bk.DomNodes=bk.DomNodes||{};bE=a.Error;bF=b.OperationCanceledException=b.OperationCanceledException||{};bG=b.Lazy=b.Lazy||{};bH=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bI=b.Queue=b.Queue||{};bJ=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bK=bJ.LazyRecord=bJ.LazyRecord||{};bL=a.IntelliFactory;bM=bL&&bL.Runtime;bN=a.Math;bO=a.console;bP=a.jQuery;bQ=a.Date;e.Main=function(){var bR,bS,bT,bU,bV,bW,bX;bR=new a.jsPDF();bR.text("Hello world!",10,10,function(){return new g.New();});bR.addPage();bR.text("Hello world on Page 2!",10,10,function(){return new g.New();});bS=a.String(bR.output("bloburl",function(){return new g.New();}));bT=E.Element("object",[H.Create("width","100%"),H.Create("height","100%"),H.Create("data",bS),H.Create("type","application/pdf")],[]);bU=(bV=n.Make().WithHole({$:0,$0:"pdf",$1:bT}),(bW=o.CompleteHoles(bV.k,bV.h,[]),(bX=new l.New(bW[1],p.main(bW[0])),(bV.i=bX,bX)))).get_Doc();D.LoadLocalTemplates("");E.RunById("main",bU);};f.FailWith=function(bR){throw new bE(bR);};f.KeyValue=function(bR){return[bR.K,bR.V];};g=b.Obj=bM.Class({Equals:function(bR){return this===bR;},GetHashCode:function(){return -1;}},null,g);g.New=bM.Ctor(function(){},g);l=k.TemplateInstance=bM.Class({get_Doc:function(){return this.doc;}},g,l);l.New=bM.Ctor(function(bR,bS){g.New.call(this);this.doc=bS;this.allVars=bR.$==0?bR.$0:f.FailWith("Should not happen");},l);m.get=function(bR,bS){m.checkBounds(bR,bS);return bR[bS];};m.length=function(bR){return bR.dims===2?bR.length*bR.length:bR.length;};m.checkBounds=function(bR,bS){if(bS<0||bS>=bR.length)f.FailWith("Index was outside the bounds of the array.");};m.set=function(bR,bS,bT){m.checkBounds(bR,bS);bR[bS]=bT;};n=k.ProviderBuilder=bM.Class({WithHole:function(bR){this.h.push(bR);return this;}},null,n);n.Make=function(){var bR;return n.New(null,(bR=w.NewGuid(),a.String(bR)),[]);};n.New=function(bR,bS,bT){return new n({i:bR,k:bS,h:bT});};o.CompleteHoles=function(bR,bS,bT){var bV,bW,bX,bY,bZ,b0;function bU(b1,b2){var b3,b4,b5,b6;return bW.Contains(b1)?null:(b3=b2===0?(b4=B.Create$1(""),[{$:8,$0:b1,$1:b4},b4]):b2===1?(b5=B.Create$1(0),[{$:13,$0:b1,$1:b5},b5]):b2===2?(b6=B.Create$1(false),[{$:9,$0:b1,$1:b6},b6]):f.FailWith("Invalid value type"),(bV.set_Item(b1,b3[1]),{$:1,$0:b3[0]}));}bV=new x.New$5();bW=new y.New$3();bX=K.Get(bS);try{while(bX.MoveNext()){bY=bX.Current();(bY.$==8?(bZ=[bY.$0,z.Box(bY.$1)],true):bY.$==11?(bZ=[bY.$0,z.Box(bY.$1)],true):bY.$==10?(bZ=[bY.$0,z.Box(bY.$1)],true):bY.$==13?(bZ=[bY.$0,z.Box(bY.$1)],true):bY.$==12?(bZ=[bY.$0,z.Box(bY.$1)],true):bY.$==9&&(bZ=[bY.$0,z.Box(bY.$1)],true))?(b0=bZ[0],bW.Add(b0),bV.set_Item(b0,bZ[1])):void 0;}}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}return[A.append(bS,m.choose(function(b1){return bU(b1[0],b1[1]);},bT)),{$:0,$0:bV}];};p.main=function(bR){D.LoadLocalTemplates("index");return bR?D.NamedTemplate("index",{$:1,$0:"main"},bR):void 0;};r=q.attr=bM.Class({},g,r);t=s.List=bM.Class({GetEnumerator:function(){return K.Get(this);},GetEnumerator0:function(){return K.Get0(this);}},null,t);u.Equals=function(bR,bS){var bT,bU,bV,bW;if(bR===bS)return true;else{bT=typeof bR;if(bT=="object"){if(bR===null||bR===void 0||bS===null||bS===void 0)return false;else if("Equals"in bR)return bR.Equals(bS);else if(bR instanceof a.Array&&bS instanceof a.Array)return u.arrayEquals(bR,bS);else if(bR instanceof a.Date&&bS instanceof a.Date)return u.dateEquals(bR,bS);else{bU=[true];for(var bX in bR)if(function(bY){bU[0]=!bR.hasOwnProperty(bY)||bS.hasOwnProperty(bY)&&u.Equals(bR[bY],bS[bY]);return!bU[0];}(bX))break;if(bU[0]){for(var bY in bS)if(function(bZ){bU[0]=!bS.hasOwnProperty(bZ)||bR.hasOwnProperty(bZ);return!bU[0];}(bY))break;}return bU[0];}}else return bT=="function"&&("$Func"in bR?bR.$Func===bS.$Func&&bR.$Target===bS.$Target:"$Invokes"in bR&&"$Invokes"in bS&&u.arrayEquals(bR.$Invokes,bS.$Invokes));}};u.Hash=function(bR){var bS;bS=typeof bR;return bS=="function"?0:bS=="boolean"?bR?1:0:bS=="number"?bR:bS=="string"?u.hashString(bR):bS=="object"?bR==null?0:bR instanceof a.Array?u.hashArray(bR):u.hashObject(bR):0;};u.arrayEquals=function(bR,bS){var bT,bU;if(m.length(bR)===m.length(bS)){bT=true;bU=0;while(bT&&bU<m.length(bR)){!u.Equals(m.get(bR,bU),m.get(bS,bU))?bT=false:void 0;bU=bU+1;}return bT;}else return false;};u.dateEquals=function(bR,bS){return bR.getTime()===bS.getTime();};u.hashString=function(bR){var bS,bT,bU;if(bR===null)return 0;else{bS=5381;for(bT=0,bU=bR.length-1;bT<=bU;bT++)bS=u.hashMix(bS,bR[bT].charCodeAt());return bS;}};u.hashArray=function(bR){var bS,bT,bU;bS=-34948909;for(bT=0,bU=m.length(bR)-1;bT<=bU;bT++)bS=u.hashMix(bS,u.Hash(m.get(bR,bT)));return bS;};u.hashObject=function(bR){var bS,bT;if("GetHashCode"in bR)return bR.GetHashCode();else{bS=[0];for(var bU in bR)if(function(bV){bS[0]=u.hashMix(u.hashMix(bS[0],u.hashString(bV)),u.Hash(bR[bV]));return false;}(bU))break;return bS[0];}};u.hashMix=function(bR,bS){return(bR<<5)+bR+bS;};u.Compare=function(bR,bS){var bT,bU,bV,bW,bX,bY;if(bR===bS)return 0;else{bU=typeof bR;switch(bU=="function"?1:bU=="boolean"?2:bU=="number"?2:bU=="string"?2:bU=="object"?3:0){case 0:return typeof bS=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return bR<bS?-1:1;case 3:if(bR===null)bV=-1;else if(bS===null)bV=1;else if("CompareTo"in bR)bV=bR.CompareTo(bS);else if("CompareTo0"in bR)bV=bR.CompareTo0(bS);else if(bR instanceof a.Array&&bS instanceof a.Array)bV=u.compareArrays(bR,bS);else if(bR instanceof a.Date&&bS instanceof a.Date)bV=u.compareDates(bR,bS);else{bW=[0];for(var bZ in bR)if(function(b0){return!bR.hasOwnProperty(b0)?false:!bS.hasOwnProperty(b0)?(bW[0]=1,true):(bW[0]=u.Compare(bR[b0],bS[b0]),bW[0]!==0);}(bZ))break;if(bW[0]===0){for(var b0 in bS)if(function(b1){return!bS.hasOwnProperty(b1)?false:!bR.hasOwnProperty(b1)&&(bW[0]=-1,true);}(b0))break;}bV=bW[0];}return bV;}}};u.compareArrays=function(bR,bS){var bT,bU;if(m.length(bR)<m.length(bS))return -1;else if(m.length(bR)>m.length(bS))return 1;else{bT=0;bU=0;while(bT===0&&bU<m.length(bR)){bT=u.Compare(m.get(bR,bU),m.get(bS,bU));bU=bU+1;}return bT;}};u.compareDates=function(bR,bS){return u.Compare(bR.getTime(),bS.getTime());};w.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bR){var bS,bT;bS=bN.random()*16|0;bT=bR=="x"?bS:bS&3|8;return bT.toString(16);});};x=s.Dictionary=bM.Class({set_Item:function(bR,bS){this.set(bR,bS);},set:function(bR,bS){var bT,bU,bV,bW;bT=this;bU=this.hash(bR);bV=this.data[bU];bV==null?(this.count=this.count+1,this.data[bU]=new a.Array({K:bR,V:bS})):(bW=m.tryFindIndex(function(bX){return bT.equals.apply(null,[(f.KeyValue(bX))[0],bR]);},bV),bW==null?(this.count=this.count+1,bV.push({K:bR,V:bS})):bV[bW.$0]={K:bR,V:bS});},TryGetValue:function(bR,bS){var bT,bU,bV;bT=this;bU=this.data[this.hash(bR)];return bU==null?false:(bV=m.tryPick(function(bW){var bX;bX=f.KeyValue(bW);return bT.equals.apply(null,[bX[0],bR])?{$:1,$0:bX[1]}:null;},bU),bV!=null&&bV.$==1&&(bS.set(bV.$0),true));},ContainsKey:function(bR){var bS,bT;bS=this;bT=this.data[this.hash(bR)];return bT==null?false:m.exists(function(bU){return bS.equals.apply(null,[(f.KeyValue(bU))[0],bR]);},bT);},Remove:function(bR){return this.remove(bR);},get_Keys:function(){return new _8.New(this);},remove:function(bR){var bS,bT,bU,bV;bS=this;bT=this.hash(bR);bU=this.data[bT];return bU==null?false:(bV=m.filter(function(bW){return!bS.equals.apply(null,[(f.KeyValue(bW))[0],bR]);},bU),m.length(bV)<bU.length&&(this.count=this.count-1,this.data[bT]=bV,true));},get_Item:function(bR){return this.get(bR);},get:function(bR){var bS,bT;bS=this;bT=this.data[this.hash(bR)];return bT==null?J.notPresent():m.pick(function(bU){var bV;bV=f.KeyValue(bU);return bS.equals.apply(null,[bV[0],bR])?{$:1,$0:bV[1]}:null;},bT);},GetEnumerator:function(){return K.Get0(this);},GetEnumerator0:function(){return K.Get0(m.concat(U.GetFieldValues(this.data)));}},g,x);x.New$5=bM.Ctor(function(){x.New$6.call(this,[],u.Equals,u.Hash);},x);x.New$6=bM.Ctor(function(bR,bS,bT){var bU,bV;g.New.call(this);this.equals=bS;this.hash=bT;this.count=0;this.data=[];bU=K.Get(bR);try{while(bU.MoveNext()){bV=bU.Current();this.set(bV.K,bV.V);}}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},x);y=s.HashSet=bM.Class({Add:function(bR){return this.add(bR);},Contains:function(bR){var bS;bS=this.data[this.hash(bR)];return bS==null?false:this.arrContains(bR,bS);},add:function(bR){var bS,bT;bS=this.hash(bR);bT=this.data[bS];return bT==null?(this.data[bS]=[bR],this.count=this.count+1,true):this.arrContains(bR,bT)?false:(bT.push(bR),this.count=this.count+1,true);},arrContains:function(bR,bS){var bT,bU,bV,bW;bT=true;bU=0;bW=bS.length;while(bT&&bU<bW)if(this.equals.apply(null,[bS[bU],bR]))bT=false;else bU=bU+1;return!bT;},ExceptWith:function(bR){var bS;bS=K.Get(bR);try{while(bS.MoveNext())this.Remove(bS.Current());}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bR){var bS,bT,bU,bV;bS=0;bT=bb.concat(this.data);for(bU=0,bV=bT.length-1;bU<=bV;bU++)m.set(bR,bU,bT[bU]);},IntersectWith:function(bR){var bS,bT,bU,bV,bW;bS=new y.New$4(bR,this.equals,this.hash);bT=bb.concat(this.data);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=bT[bU];!bS.Contains(bW)?this.Remove(bW):void 0;}},Remove:function(bR){var bS;bS=this.data[this.hash(bR)];return bS==null?false:this.arrRemove(bR,bS)&&(this.count=this.count-1,true);},arrRemove:function(bR,bS){var bT,bU,bV,bW;bT=true;bU=0;bW=bS.length;while(bT&&bU<bW)if(this.equals.apply(null,[bS[bU],bR])){bS.splice.apply(bS,[bU,1]);bT=false;}else bU=bU+1;return!bT;},GetEnumerator:function(){return K.Get(bb.concat(this.data));},GetEnumerator0:function(){return K.Get(bb.concat(this.data));}},g,y);y.New$3=bM.Ctor(function(){y.New$4.call(this,[],u.Equals,u.Hash);},y);y.New$4=bM.Ctor(function(bR,bS,bT){var bU;g.New.call(this);this.equals=bS;this.hash=bT;this.data=[];this.count=0;bU=K.Get(bR);try{while(bU.MoveNext())this.add(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},y);y.New$2=bM.Ctor(function(bR){y.New$4.call(this,bR,u.Equals,u.Hash);},y);z.Box=a.id;A.append=function(bR,bS){return{GetEnumerator:function(){var bT,bU;bT=K.Get(bR);bU=[true];return new L.New(bT,null,function(bV){var bW;return bV.s.MoveNext()?(bV.c=bV.s.Current(),true):(bW=bV.s,!u.Equals(bW,null)?bW.Dispose():void 0,bV.s=null,bU[0]&&(bU[0]=false,bV.s=K.Get(bS),bV.s.MoveNext()?(bV.c=bV.s.Current(),true):(bV.s.Dispose(),bV.s=null,false)));},function(bV){var bW;bW=bV.s;!u.Equals(bW,null)?bW.Dispose():void 0;});}};};A.head=function(bR){var bS;bS=K.Get(bR);try{return bS.MoveNext()?bS.Current():A.insufficient();}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};A.fold=function(bR,bS,bT){var bU,bV;bU=bS;bV=K.Get(bT);try{while(bV.MoveNext())bU=bR(bU,bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};A.iter=function(bR,bS){var bT;bT=K.Get(bS);try{while(bT.MoveNext())bR(bT.Current());}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};A.map=function(bR,bS){return{GetEnumerator:function(){var bT;bT=K.Get(bS);return new L.New(null,null,function(bU){return bT.MoveNext()&&(bU.c=bR(bT.Current()),true);},function(){bT.Dispose();});}};};A.forall=function(bR,bS){return!A.exists(function(bT){return!bR(bT);},bS);};A.max=function(bR){var bS,bT,bU;bS=K.Get(bR);try{if(!bS.MoveNext())A.seqEmpty();bT=bS.Current();while(bS.MoveNext()){bU=bS.Current();u.Compare(bU,bT)===1?bT=bU:void 0;}return bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};A.exists=function(bR,bS){var bT,bU;bT=K.Get(bS);try{bU=false;while(!bU&&bT.MoveNext())bU=bR(bT.Current());return bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};A.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};m.choose=function(bR,bS){var bT,bU,bV,bW;bT=[];for(bU=0,bV=bS.length-1;bU<=bV;bU++){bW=bR(bS[bU]);bW==null?void 0:bT.push(bW.$0);}return bT;};m.tryFindIndex=function(bR,bS){var bT,bU;bT=null;bU=0;while(bU<bS.length&&bT==null){bR(bS[bU])?bT={$:1,$0:bU}:void 0;bU=bU+1;}return bT;};m.tryPick=function(bR,bS){var bT,bU,bV;bT=null;bU=0;while(bU<bS.length&&bT==null){bV=bR(bS[bU]);bV!=null&&bV.$==1?bT=bV:void 0;bU=bU+1;}return bT;};m.exists=function(bR,bS){var bT,bU,bV,bW;bT=false;bU=0;bW=m.length(bS);while(!bT&&bU<bW)if(bR(bS[bU]))bT=true;else bU=bU+1;return bT;};m.concat=function(bR){return a.Array.prototype.concat.apply([],m.ofSeq(bR));};m.foldBack=function(bR,bS,bT){var bU,bV,bW,bX,bY;bU=bT;bW=bS.length;for(bX=1,bY=bW;bX<=bY;bX++)bU=bR(bS[bW-bX],bU);return bU;};m.iter=function(bR,bS){var bT,bU;for(bT=0,bU=bS.length-1;bT<=bU;bT++)bR(bS[bT]);};m.map=function(bR,bS){var bT,bU,bV;bT=new a.Array(bS.length);for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT[bU]=bR(bS[bU]);return bT;};m.filter=function(bR,bS){var bT,bU,bV;bT=[];for(bU=0,bV=bS.length-1;bU<=bV;bU++)if(bR(bS[bU]))bT.push(bS[bU]);return bT;};m.ofList=function(bR){var bS,bT;bT=[];bS=bR;while(!(bS.$==0)){bT.push(bg.head(bS));bS=bg.tail(bS);}return bT;};m.ofSeq=function(bR){var bS,bT;if(bR instanceof a.Array)return bR.slice();else if(bR instanceof bh)return m.ofList(bR);else{bS=[];bT=K.Get(bR);try{while(bT.MoveNext())bS.push(bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}}};m.pick=function(bR,bS){var bT;bT=m.tryPick(bR,bS);return bT==null?f.FailWith("KeyNotFoundException"):bT.$0;};m.forall=function(bR,bS){var bT,bU,bV,bW;bT=true;bU=0;bW=m.length(bS);while(bT&&bU<bW)if(bR(bS[bU]))bU=bU+1;else bT=false;return bT;};m.create=function(bR,bS){var bT,bU,bV;bT=new a.Array(bR);for(bU=0,bV=bR-1;bU<=bV;bU++)bT[bU]=bS;return bT;};m.init=function(bR,bS){var bT,bU,bV;bR<0?f.FailWith("Negative size given."):null;bT=new a.Array(bR);for(bU=0,bV=bR-1;bU<=bV;bU++)bT[bU]=bS(bU);return bT;};B=h.Var$1=bM.Class({},g,B);B.Create$1=function(bR){return new N.New(false,O.New({$:2,$0:bR,$1:[]}),bR);};D.LoadLocalTemplates=function(bR){!D.LocalTemplatesLoaded()?(D.set_LocalTemplatesLoaded(true),D.LoadNestedTemplates(self.document.body,"")):void 0;D.LoadedTemplates().set_Item(bR,D.LoadedTemplateFile(""));};D.NamedTemplate=function(bR,bS,bT){var bU,bV;bU=(bV=null,[D.LoadedTemplateFile(bR).TryGetValue(bS==null?"":bS.$0,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);return bU[0]?D.ChildrenTemplate(bU[1].cloneNode(true),bT):(bO.warn("Local template doesn't exist",bS),E.get_Empty());};D.LocalTemplatesLoaded=function(){Z.$cctor();return Z.LocalTemplatesLoaded;};D.set_LocalTemplatesLoaded=function(bR){Z.$cctor();Z.LocalTemplatesLoaded=bR;};D.LoadNestedTemplates=function(bR,bS){var bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;function bT(b8){var b9,b_;if(!bU.ContainsKey(b8)){b9=(b_=null,[bV.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?(b7.Add(b8),bV.Remove(b8),D.PrepareTemplateStrict(bS,{$:1,$0:b8},b9[1][0],{$:1,$0:b9[1][1]},{$:1,$0:bT})):bO.warn(b7.Contains(b8)?"Encountered loop when instantiating "+b8:"Local template does not exist: "+b8);}}bU=D.LoadedTemplateFile(bS);bV=new x.New$5();bW=bR.querySelectorAll("[ws-template]");for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=bW[bX];b0=bZ.getAttribute("ws-template").toLowerCase();bZ.removeAttribute("ws-template");bV.set_Item(b0,[[bZ],D.FakeRootSingle(bZ)]);}b1=bR.querySelectorAll("[ws-children-template]");for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1[b2];b5=b4.getAttribute("ws-children-template").toLowerCase();b4.removeAttribute("ws-children-template");bV.set_Item(b5,(b6=V.ChildrenArray(b4),[b6,D.FakeRoot(b6)]));}b7=new y.New$3();while(bV.count>0)bT(A.head(bV.get_Keys()));};D.LoadedTemplates=function(){Z.$cctor();return Z.LoadedTemplates;};D.LoadedTemplateFile=function(bR){var bS,bT,bU;bS=(bT=null,[D.LoadedTemplates().TryGetValue(bR,{get:function(){return bT;},set:function(bV){bT=bV;}}),bT]);return bS[0]?bS[1]:(bU=new x.New$5(),(D.LoadedTemplates().set_Item(bR,bU),bU));};D.ChildrenTemplate=function(bR,bS){var bT,bU,bV,bW,bX;bT=D.InlineTemplate(bR,bS);bU=bT[1];bV=bT[0];bW=bV.Els;return!u.Equals(bW,null)&&bW.length===1&&(m.get(bW,0)instanceof T&&(u.Equals(m.get(bW,0).nodeType,T.ELEMENT_NODE)&&(bX=m.get(bW,0),true)))?_5.TreeNode(bV,bU):E.Mk({$:6,$0:bV},bU);};D.FakeRootSingle=function(bR){var bS,bT,bU;bR.removeAttribute("ws-template");bS=bR.getAttribute("ws-replace");bS===null?void 0:(bR.removeAttribute("ws-replace"),bT=bR.parentNode,u.Equals(bT,null)?void 0:(bU=self.document.createElement(bR.tagName),bU.setAttribute("ws-replace",bS),bT.replaceChild(bU,bR)));return D.FakeRoot([bR]);};D.FakeRoot=function(bR){var bS,bT,bU;bS=self.document.createElement("div");for(bT=0,bU=bR.length-1;bT<=bU;bT++)bS.appendChild(m.get(bR,bT));return bS;};D.PrepareTemplateStrict=function(bR,bS,bT,bU,bV){var bW,bX;function bY(b3,b4){var b5,b6,b7,b8,b9,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct;function b_(cu){}while(true)switch(b3){case 0:if(b4!==null){b5=b4.nextSibling;if(u.Equals(b4.nodeType,T.TEXT_NODE))_6.convertTextNode(b4);else if(u.Equals(b4.nodeType,T.ELEMENT_NODE))b0(b4);b4=b5;}else return null;break;case 1:b$=_7.string(b4.nodeName,{$:1,$0:3},null).toLowerCase();ca=(b6=b$.indexOf("."),b6===-1?[bR,b$]:[_7.string(b$,null,{$:1,$0:b6-1}),_7.string(b$,{$:1,$0:b6+1},null)]);cb=ca[1];cc=ca[0];if(cc!==""&&!D.LoadedTemplates().ContainsKey(cc))return _6.failNotLoaded(cb);else{if(cc===""&&bV!=null)bV.$0(cb);cd=D.LoadedTemplates().get_Item(cc);if(!cd.ContainsKey(cb))return _6.failNotLoaded(cb);else{ce=cd.get_Item(cb);cf=ce.cloneNode(true);cg=new y.New$3();ch=new x.New$5();ci=b4.attributes;for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=ci.item(cj).name.toLowerCase();ch.set_Item(cl,(cm=ci.item(cj).nodeValue,cm===""?cl:cm.toLowerCase()));!cg.Add(cl)?bO.warn("Hole mapped twice",cl):void 0;}for(cn=0,co=b4.childNodes.length-1;cn<=co;cn++){cp=b4.childNodes[cn];u.Equals(cp.nodeType,T.ELEMENT_NODE)?!cg.Add(cp.nodeName.toLowerCase())?bO.warn("Hole filled twice",cb):void 0:void 0;}cq=b4.childNodes.length===1&&u.Equals(b4.firstChild.nodeType,T.TEXT_NODE);if(cq){b8=_6.fillTextHole(cf,b4.firstChild.textContent,cb);((function(cu){return function(cv){if(cv!=null)cu(cv.$0);};}((b9=function(cu){return function(cv){return cu.Add(cv);};}(cg),function(cu){return b_(b9(cu));})))(b8));}_6.removeHolesExcept(cf,cg);if(!cq){for(cr=0,cs=b4.childNodes.length-1;cr<=cs;cr++){ct=b4.childNodes[cr];u.Equals(ct.nodeType,T.ELEMENT_NODE)?ct.hasAttributes()?_6.fillInstanceAttrs(cf,ct):bZ(cf,ct):void 0;}}_6.mapHoles(cf,ch);_6.fill(cf,b4.parentNode,b4);b4.parentNode.removeChild(b4);return;}}break;}}function bZ(b3,b4){var b5,b7,b8;function b6(b9,b_){var b$,ca,cb;if(b7==="title"&&b4.hasChildNodes()){b$=bP.parseHTML(b4.textContent);b4.removeChild(b4.firstChild);for(ca=0,cb=b$.length-1;ca<=cb;ca++)b4.appendChild(m.get(b$,ca));}else null;b0(b4);return _6.fill(b4,b9,b_);}b7=b4.nodeName.toLowerCase();V.IterSelector(b3,"[ws-attr-holes]",function(b9){var b_,b$,ca,cb,cc;b_=bi.SplitChars(b9.getAttribute("ws-attr-holes"),[" "],1);for(b$=0,ca=b_.length-1;b$<=ca;b$++){cb=m.get(b_,b$);b9.setAttribute(cb,(cc=new a.RegExp("\\${"+b7+"}","ig"),b9.getAttribute(cb).replace(cc,b4.textContent)));}});b8=b3.querySelector("[ws-hole="+b7+"]");if(u.Equals(b8,null)){b5=b3.querySelector("[ws-replace="+b7+"]");return u.Equals(b5,null)?null:(b6(b5.parentNode,b5),void b5.parentNode.removeChild(b5));}else{while(b8.hasChildNodes())b8.removeChild(b8.lastChild);b8.removeAttribute("ws-hole");return b6(b8,null);}}function b0(b3){if(bi.StartsWith(b3.nodeName.toLowerCase(),"ws-"))b2(b3);else{_6.convertAttrs(b3);b1(b3.firstChild);}}function b1(b3){return bY(0,b3);}function b2(b3){return bY(1,b3);}bW=bU==null?D.FakeRoot(bT):bU.$0;bX=(bS==null?"":bS.$0).toLowerCase();D.LoadedTemplateFile(bR).set_Item(bX,bW);m.length(bT)>0?(function(b3){var b4,b5,b6,b7;while(true){b4=b3.querySelector("[ws-template]");if(u.Equals(b4,null)){b5=b3.querySelector("[ws-children-template]");if(u.Equals(b5,null))return null;else{b6=b5.getAttribute("ws-children-template");b5.removeAttribute("ws-children-template");D.PrepareTemplateStrict(bR,{$:1,$0:b6},V.ChildrenArray(b5),null,null);b3=b3;}}else{b7=b4.getAttribute("ws-template");(D.PrepareSingleTemplate(bR,{$:1,$0:b7},b4))(null);b3=b3;}}}(bW),b1(m.get(bT,0))):void 0;};D.InlineTemplate=function(bR,bS){var bT,bU,bV,bW,bZ,b0,b1,b2,b3,b4,b5;function bX(b6,b7){var b8,b9,b_;b8=W.Insert(b6,b7);b0.push(W.Updates(b8));b1.push([b6,b8]);b9=bM.GetOptional(b8.OnAfterRender);return b9==null?null:(b_=b9.$0,void b2.push(function(){b_(b6);}));}function bY(b6){var b7,b8;b7=(b8=null,[b3.TryGetValue(b6,{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);return b7[0]?b7[1].$==0?{$:1,$0:b7[1].$1}:b7[1].$==1?{$:1,$0:E.TextNode(b7[1].$1)}:b7[1].$==2?{$:1,$0:E.TextView(b7[1].$1)}:b7[1].$==8?{$:1,$0:E.TextView(b7[1].$1.get_View())}:b7[1].$==9?{$:1,$0:E.TextView(P.Map(a.String,b7[1].$1.get_View()))}:b7[1].$==10?{$:1,$0:E.TextView(P.Map(function(b9){return b9.get_Input();},b7[1].$1.get_View()))}:b7[1].$==11?{$:1,$0:E.TextView(P.Map(a.String,b7[1].$1.get_View()))}:b7[1].$==12?{$:1,$0:E.TextView(P.Map(function(b9){return b9.get_Input();},b7[1].$1.get_View()))}:b7[1].$==13?{$:1,$0:E.TextView(P.Map(a.String,b7[1].$1.get_View()))}:(bO.warn("Content hole filled with attribute data",b6),null):null;}bZ=[];b0=[];b1=[];b2=[];b3=new x.New$5();b4=K.Get(bS);try{while(b4.MoveNext()){b5=b4.Current();b3.set_Item(b5.$0,b5);}}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}bT=V.ChildrenArray(bR);V.IterSelector(bR,"[ws-hole]",function(b6){var b7,b8,b9;b9=b6.getAttribute("ws-hole");b6.removeAttribute("ws-hole");while(b6.hasChildNodes())b6.removeChild(b6.lastChild);b7=bY(b9);b7!=null&&b7.$==1?(b8=b7.$0,_2.LinkElement(b6,b8.docNode),bZ.push(_3.New(W.Empty(b6),b8.docNode,null,b6,Y.Int(),null)),b0.push(b8.updates)):void 0;});V.IterSelector(bR,"[ws-replace]",function(b6){var b7,b8,b9,b_,b$,ca;b7=bY(b6.getAttribute("ws-replace"));b7!=null&&b7.$==1?(b8=b7.$0,b9=b6.parentNode,b_=self.document.createTextNode(""),b9.replaceChild(b_,b6),b$=_2.InsertBeforeDelim(b_,b8.docNode),ca=m.tryFindIndex(function(cb){return b6===cb;},bT),ca==null?void 0:m.set(bT,ca.$0,b8.docNode),bZ.push(_3.New(W.Empty(b9),b8.docNode,{$:1,$0:[b$,b_]},b9,Y.Int(),null)),b0.push(b8.updates)):void 0;});V.IterSelector(bR,"[ws-attr]",function(b6){var b7,b8,b9;b7=b6.getAttribute("ws-attr");b6.removeAttribute("ws-attr");b8=(b9=null,[b3.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);b8[0]?b8[1].$==3?bX(b6,b8[1].$1):bO.warn("Attribute hole filled with non-attribute data",b7):void 0;});V.IterSelector(bR,"[ws-on]",function(b6){bX(b6,H.Concat(m.choose(function(b7){var b8,b9,b_;b8=bi.SplitChars(b7,[":"],1);b9=(b_=null,[b3.TryGetValue(m.get(b8,1),{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?b9[1].$==4?{$:1,$0:bf.Handler(m.get(b8,0),b9[1].$1)}:b9[1].$==5?{$:1,$0:H.Handler(m.get(b8,0),b9[1].$2)}:(bO.warn("Event hole on"+m.get(b8,0)+" filled with non-event data",m.get(b8,1)),null):null;},bi.SplitChars(b6.getAttribute("ws-on"),[" "],1))));b6.removeAttribute("ws-on");});V.IterSelector(bR,"[ws-onafterrender]",function(b6){var b7,b8,b9;b7=b6.getAttribute("ws-onafterrender");b8=(b9=null,[b3.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);b8[0]?b8[1].$==6?(b6.removeAttribute("ws-onafterrender"),bX(b6,bf.OnAfterRender(b8[1].$1))):b8[1].$==7?(b6.removeAttribute("ws-onafterrender"),bX(b6,bf.OnAfterRender(b8[1].$1))):bO.warn("onafterrender hole filled with non-onafterrender data",b7):void 0;});V.IterSelector(bR,"[ws-var]",function(b6){var b7,b8,b9;b7=b6.getAttribute("ws-var");b6.removeAttribute("ws-var");b8=(b9=null,[b3.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);b8[0]?b8[1].$==8?bX(b6,bf.Value(b8[1].$1)):b8[1].$==9?bX(b6,bf.Checked(b8[1].$1)):b8[1].$==10?bX(b6,bf.IntValue(b8[1].$1)):b8[1].$==11?bX(b6,bf.IntValueUnchecked(b8[1].$1)):b8[1].$==12?bX(b6,bf.FloatValue(b8[1].$1)):b8[1].$==13?bX(b6,bf.FloatValueUnchecked(b8[1].$1)):bO.warn("Var hole filled with non-Var data",b7):void 0;});V.IterSelector(bR,"[ws-attr-holes]",function(b6){var b7,b8,b9,b_;b7=new a.RegExp(D.TextHoleRE(),"g");b8=bi.SplitChars(b6.getAttribute("ws-attr-holes"),[" "],1);b6.removeAttribute("ws-attr-holes");for(b9=0,b_=b8.length-1;b9<=b_;b9++)(function(){var b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;ci=m.get(b8,b9);cj=b6.getAttribute(ci);b$=null;ca=0;ck=[];while(b$=b7.exec(cj),b$!==null){cl=_7.string(cj,{$:1,$0:ca},{$:1,$0:b7.lastIndex-m.get(b$,0).length-1});ca=b7.lastIndex;ck.push([cl,m.get(b$,1)]);}cc=_7.string(cj,{$:1,$0:ca},null);b7.lastIndex=0;cd=m.foldBack(function(cm,cn){return(function(co){var cp,cq;cp=co[0];cq=co[1];return function(cr){var cs,ct,cu,cv,cw;cs=cr[0];ct=cr[1];cu=(cv=(cw=null,[b3.TryGetValue(cq,{get:function(){return cw;},set:function(cx){cw=cx;}}),cw]),cv[0]?cv[1].$==1?{$:0,$0:cv[1].$1}:cv[1].$==2?{$:1,$0:cv[1].$1}:cv[1].$==8?{$:1,$0:cv[1].$1.get_View()}:cv[1].$==9?{$:1,$0:P.Map(a.String,cv[1].$1.get_View())}:cv[1].$==10?{$:1,$0:P.Map(function(cx){return cx.get_Input();},cv[1].$1.get_View())}:cv[1].$==11?{$:1,$0:P.Map(a.String,cv[1].$1.get_View())}:cv[1].$==12?{$:1,$0:P.Map(function(cx){return cx.get_Input();},cv[1].$1.get_View())}:cv[1].$==13?{$:1,$0:P.Map(a.String,cv[1].$1.get_View())}:(bO.warn("Attribute value hole filled with non-text data",cq),{$:0,$0:""}):{$:0,$0:""});return cu.$==1?[cp,new bh({$:1,$0:cs===""?cu.$0:P.Map(function(cx){return cx+cs;},cu.$0),$1:ct})]:[cp+cu.$0+cs,ct];};}(cm))(cn);},ck,[cc,bh.Empty]);return bX(b6,cd[1].$==1?cd[1].$1.$==1?cd[1].$1.$1.$==1?cd[1].$1.$1.$1.$==0?(ce=cd[0],bf.Dynamic(ci,P.Map3(function(cm,cn,co){return ce+cm+cn+co;},cd[1].$0,cd[1].$1.$0,cd[1].$1.$1.$0))):(cf=cd[0],bf.Dynamic(ci,P.Map(function(cm){return cf+bi.concat("",cm);},P.Sequence(cd[1])))):(cg=cd[0],bf.Dynamic(ci,P.Map2(function(cm,cn){return cg+cm+cn;},cd[1].$0,cd[1].$1.$0))):cd[0]===""?bf.Dynamic(ci,cd[1].$0):(ch=cd[0],bf.Dynamic(ci,P.Map(function(cm){return ch+cm;},cd[1].$0))):H.Create(ci,cd[0]));}());});return[bM.DeleteEmptyFields({Els:bT,Dirty:true,Holes:bZ,Attrs:b1,Render:(bU=b2.length==0?null:{$:1,$0:function(b6){m.iter(function(b7){b7(b6);},b2);}},bU?bU.$0:void 0),El:(bV=!u.Equals(bT,null)&&bT.length===1&&(m.get(bT,0)instanceof T&&(m.get(bT,0)instanceof a.Element&&(bW=m.get(bT,0),true)))?{$:1,$0:bW}:null,bV?bV.$0:void 0)},["Render","El"]),ba.TreeReduce(P.Const(),P.Map2Unit,b0)];};D.PrepareSingleTemplate=function(bR,bS,bT){var bU,bV,bW;bU=D.FakeRootSingle(bT);bV=[bT];bW={$:1,$0:bU};return function(bX){D.PrepareTemplateStrict(bR,bS,bV,bW,bX);};};D.TextHoleRE=function(){Z.$cctor();return Z.TextHoleRE;};E=h.Doc=bM.Class({},g,E);E.RunById=function(bR,bS){var bT;bT=V.Doc().getElementById(bR);u.Equals(bT,null)?f.FailWith("invalid id: "+bR):E.Run(bT,bS);};E.Run=function(bR,bS){_2.LinkElement(bR,bS.docNode);E.RunInPlace(false,bR,bS);};E.Element=function(bR,bS,bT){var bU,bV;bU=H.Concat(bS);bV=E.Concat(bT);return _5.New(V.CreateElement(bR),bU,bV);};E.get_Empty=function(){return E.Mk(null,P.Const());};E.RunInPlace=function(bR,bS,bT){var bU;bU=_2.CreateRunState(bS,bT.docNode);P.Sink(_9.get_UseAnimations()||_.BatchUpdatesEnabled()?$.StartProcessor(_2.PerformAnimatedUpdate(bR,bU,bT.docNode)):function(){_2.PerformSyncUpdate(bR,bU,bT.docNode);},bT.updates);};E.Concat=function(bR){var bS;bS=ba.ofSeqNonCopying(bR);return ba.TreeReduce(E.get_Empty(),E.Append,bS);};E.Mk=function(bR,bS){return new E.New(bR,bS);};E.Append=function(bR,bS){return E.Mk({$:0,$0:bR.docNode,$1:bS.docNode},P.Map2Unit(bR.updates,bS.updates));};E.TextNode=function(bR){return E.Mk({$:5,$0:V.CreateText(bR)},P.Const());};E.TextView=function(bR){var bS;bS=_2.CreateTextNode();return E.Mk({$:4,$0:bS},P.Map(function(bT){_2.UpdateTextNode(bS,bT);},bR));};E.New=bM.Ctor(function(bR,bS){g.New.call(this);this.docNode=bR;this.updates=bS;},E);G.NewFromSeq=function(bR){var bS,bT,bU;bS={};bT=K.Get(bR);try{while(bT.MoveNext()){bU=bT.Current();bS[bU[0]]=bU[1];}}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}return bS;};H=h.AttrProxy=bM.Class({},null,H);H.Create=function(bR,bS){return W.Static(function(bT){V.SetAttr(bT,bR,bS);});};H.Concat=function(bR){var bS;bS=ba.ofSeqNonCopying(bR);return ba.TreeReduce(W.EmptyAttr(),H.Append,bS);};H.Append=function(bR,bS){return W.AppendTree(bR,bS);};H.Handler=function(bR,bS){return H.HandlerImpl(bR,bS);};H.HandlerImpl=function(bR,bS){return W.Static(function(bT){bT.addEventListener(bR,function(bU){return(bS(bT))(bU);},false);});};J.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};K.Get=function(bR){return bR instanceof a.Array?K.ArrayEnumerator(bR):u.Equals(typeof bR,"string")?K.StringEnumerator(bR):bR.GetEnumerator();};K.ArrayEnumerator=function(bR){return new L.New(0,null,function(bS){var bT;bT=bS.s;return bT<m.length(bR)&&(bS.c=m.get(bR,bT),bS.s=bT+1,true);},void 0);};K.StringEnumerator=function(bR){return new L.New(0,null,function(bS){var bT;bT=bS.s;return bT<bR.length&&(bS.c=bR[bT],bS.s=bT+1,true);},void 0);};K.Get0=function(bR){return bR instanceof a.Array?K.ArrayEnumerator(bR):u.Equals(typeof bR,"string")?K.StringEnumerator(bR):"GetEnumerator0"in bR?bR.GetEnumerator0():bR.GetEnumerator();};L=K.T=bM.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,L);L.New=bM.Ctor(function(bR,bS,bT,bU){g.New.call(this);this.s=bR;this.c=bS;this.n=bT;this.d=bU;},L);M=h.Var=bM.Class({},g,M);M.New=bM.Ctor(function(){g.New.call(this);},M);N=h.ConcreteVar=bM.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bR){if(this.isConst)(function(bS){return bS("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bS){bO.log(bS);}));else{O.Obsolete(this.snap);this.current=bR;this.snap=O.New({$:2,$0:bR,$1:[]});}},UpdateMaybe:function(bR){var bS;bS=bR(this.Get());bS!=null&&bS.$==1?this.Set(bS.$0):void 0;}},M,N);N.New=bM.Ctor(function(bR,bS,bT){var bU;bU=this;M.New.call(this);this.isConst=bR;this.current=bT;this.snap=bS;this.view=function(){return bU.snap;};this.id=Y.Int();},N);O.WhenRun=function(bR,bS,bT){var bU;bU=bR.s;bU==null?bT():bU!=null&&bU.$==2?(bU.$1.push(bT),bS(bU.$0)):bU!=null&&bU.$==3?(bU.$0.push(bS),bU.$1.push(bT)):bS(bU.$0);};O.Map=function(bR,bS){var bT,bU;bT=bS.s;return bT!=null&&bT.$==0?O.New({$:0,$0:bR(bT.$0)}):(bU=O.New({$:3,$0:[],$1:[]}),(O.When(bS,function(bV){O.MarkDone(bU,bS,bR(bV));},bU),bU));};O.Map3=function(bR,bS,bT,bU){var bV,bW,bX,bY;function bZ(b0){var b1,b2,b3,b4;if(!(b1=bY.s,b1!=null&&b1.$==0||b1!=null&&b1.$==2)){b2=O.ValueAndForever(bS);b3=O.ValueAndForever(bT);b4=O.ValueAndForever(bU);b2!=null&&b2.$==1?b3!=null&&b3.$==1?b4!=null&&b4.$==1?b2.$0[1]&&b3.$0[1]&&b4.$0[1]?O.MarkForever(bY,bR(b2.$0[0],b3.$0[0],b4.$0[0])):O.MarkReady(bY,bR(b2.$0[0],b3.$0[0],b4.$0[0])):void 0:void 0:void 0;}}bV=bS.s;bW=bT.s;bX=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?bX!=null&&bX.$==0?O.New({$:0,$0:bR(bV.$0,bW.$0,bX.$0)}):O.Map3Opt1(bR,bV.$0,bW.$0,bU):bX!=null&&bX.$==0?O.Map3Opt2(bR,bV.$0,bX.$0,bT):O.Map3Opt3(bR,bV.$0,bT,bU):bW!=null&&bW.$==0?bX!=null&&bX.$==0?O.Map3Opt4(bR,bW.$0,bX.$0,bS):O.Map3Opt5(bR,bW.$0,bS,bU):bX!=null&&bX.$==0?O.Map3Opt6(bR,bX.$0,bS,bT):(bY=O.New({$:3,$0:[],$1:[]}),(O.When(bS,bZ,bY),O.When(bT,bZ,bY),O.When(bU,bZ,bY),bY));};O.Sequence=function(bR){var bS,bT,bU;function bV(bW){var bX;if(bU[0]===0){bX=m.map(function(bY){var bZ;bZ=bY.s;return bZ!=null&&bZ.$==0?bZ.$0:bZ!=null&&bZ.$==2?bZ.$0:f.FailWith("value not found by View.Sequence");},bS);m.forall(function(bY){var bZ;bZ=bY.s;return bZ!=null&&bZ.$==0;},bS)?O.MarkForever(bT,bX):O.MarkReady(bT,bX);}else bU[0]--;}bS=m.ofSeq(bR);return bS.length==0?O.New({$:0,$0:[]}):(bT=O.New({$:3,$0:[],$1:[]}),(bU=[m.length(bS)-1],(m.iter(function(bW){O.When(bW,bV,bT);},bS),bT)));};O.Map2=function(bR,bS,bT){var bU,bV,bW;function bX(bY){var bZ,b0,b1;if(!(bZ=bW.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=O.ValueAndForever(bS);b1=O.ValueAndForever(bT);b0!=null&&b0.$==1?b1!=null&&b1.$==1?b0.$0[1]&&b1.$0[1]?O.MarkForever(bW,bR(b0.$0[0],b1.$0[0])):O.MarkReady(bW,bR(b0.$0[0],b1.$0[0])):void 0:void 0;}}bU=bS.s;bV=bT.s;return bU!=null&&bU.$==0?bV!=null&&bV.$==0?O.New({$:0,$0:bR(bU.$0,bV.$0)}):O.Map2Opt1(bR,bU.$0,bT):bV!=null&&bV.$==0?O.Map2Opt2(bR,bV.$0,bS):(bW=O.New({$:3,$0:[],$1:[]}),(O.When(bS,bX,bW),O.When(bT,bX,bW),bW));};O.Map2Unit=function(bR,bS){var bT,bU,bV;function bW(){var bX,bY,bZ;if(!(bX=bV.s,bX!=null&&bX.$==0||bX!=null&&bX.$==2)){bY=O.ValueAndForever(bR);bZ=O.ValueAndForever(bS);bY!=null&&bY.$==1?bZ!=null&&bZ.$==1?bY.$0[1]&&bZ.$0[1]?O.MarkForever(bV,null):O.MarkReady(bV,null):void 0:void 0;}}bT=bR.s;bU=bS.s;return bT!=null&&bT.$==0?bU!=null&&bU.$==0?O.New({$:0,$0:null}):bS:bU!=null&&bU.$==0?bR:(bV=O.New({$:3,$0:[],$1:[]}),(O.When(bR,bW,bV),O.When(bS,bW,bV),bV));};O.Copy=function(bR){var bS,bT,bU;bS=bR.s;return bS==null?bR:bS!=null&&bS.$==2?(bT=O.New({$:2,$0:bS.$0,$1:[]}),(O.WhenObsolete(bR,bT),bT)):bS!=null&&bS.$==3?(bU=O.New({$:3,$0:[],$1:[]}),(O.When(bR,function(bV){O.MarkDone(bU,bR,bV);},bU),bU)):bR;};O.WhenObsoleteRun=function(bR,bS){var bT;bT=bR.s;bT==null?bS():bT!=null&&bT.$==2?bT.$1.push(bS):bT!=null&&bT.$==3?bT.$1.push(bS):void 0;};O.When=function(bR,bS,bT){var bU;bU=bR.s;bU==null?O.Obsolete(bT):bU!=null&&bU.$==2?(O.EnqueueSafe(bU.$1,bT),bS(bU.$0)):bU!=null&&bU.$==3?(bU.$0.push(bS),O.EnqueueSafe(bU.$1,bT)):bS(bU.$0);};O.MarkDone=function(bR,bS,bT){var bU;if(bU=bS.s,bU!=null&&bU.$==0)O.MarkForever(bR,bT);else O.MarkReady(bR,bT);};O.Map3Opt1=function(bR,bS,bT,bU){return O.Map(function(bV){return bR(bS,bT,bV);},bU);};O.Map3Opt2=function(bR,bS,bT,bU){return O.Map(function(bV){return bR(bS,bV,bT);},bU);};O.Map3Opt3=function(bR,bS,bT,bU){return O.Map2(function(bV,bW){return bR(bS,bV,bW);},bT,bU);};O.Map3Opt4=function(bR,bS,bT,bU){return O.Map(function(bV){return bR(bV,bS,bT);},bU);};O.Map3Opt5=function(bR,bS,bT,bU){return O.Map2(function(bV,bW){return bR(bV,bS,bW);},bT,bU);};O.Map3Opt6=function(bR,bS,bT,bU){return O.Map2(function(bV,bW){return bR(bV,bW,bS);},bT,bU);};O.ValueAndForever=function(bR){var bS;bS=bR.s;return bS!=null&&bS.$==0?{$:1,$0:[bS.$0,true]}:bS!=null&&bS.$==2?{$:1,$0:[bS.$0,false]}:null;};O.MarkForever=function(bR,bS){var bT,bU,bV,bW;bT=bR.s;if(bT!=null&&bT.$==3){bR.s={$:0,$0:bS};bU=bT.$0;for(bV=0,bW=m.length(bU)-1;bV<=bW;bV++)(m.get(bU,bV))(bS);}else void 0;};O.MarkReady=function(bR,bS){var bT,bU,bV,bW;bT=bR.s;if(bT!=null&&bT.$==3){bR.s={$:2,$0:bS,$1:bT.$1};bU=bT.$0;for(bV=0,bW=m.length(bU)-1;bV<=bW;bV++)(m.get(bU,bV))(bS);}else void 0;};O.Map2Opt1=function(bR,bS,bT){return O.Map(function(bU){return bR(bS,bU);},bT);};O.Map2Opt2=function(bR,bS,bT){return O.Map(function(bU){return bR(bU,bS);},bT);};O.WhenObsolete=function(bR,bS){var bT;bT=bR.s;bT==null?O.Obsolete(bS):bT!=null&&bT.$==2?O.EnqueueSafe(bT.$1,bS):bT!=null&&bT.$==3?O.EnqueueSafe(bT.$1,bS):void 0;};O.EnqueueSafe=function(bR,bS){var bT,bU,bV,bW;bR.push(bS);if(bR.length%20===0){bT=bR.slice(0);bI.Clear(bR);for(bU=0,bV=m.length(bT)-1;bU<=bV;bU++){bW=m.get(bT,bU);typeof bW=="object"?function(bX){if(bX.s)bR.push(bX);}(bW):function(bX){bR.push(bX);}(bW);}}else void 0;};P=h.View=bM.Class({},null,P);Q=h.CheckedInput=bM.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,Q);R.TryParseInt32=function(bR,bS){return R.TryParse(bR,-2147483648,2147483647,bS);};U.GetFieldValues=function(bR){var bS,bT;bS=[];for(var bU in bR)bS.push(bR[bU]);return bS;};V.Doc=function(){_1.$cctor();return _1.Doc;};V.SetAttr=function(bR,bS,bT){bR.setAttribute(bS,bT);};V.ChildrenArray=function(bR){var bS,bT,bU;bS=[];for(bT=0,bU=bR.childNodes.length-1;bT<=bU;bT++)bS.push(bR.childNodes[bT]);return bS;};V.CreateElement=function(bR){return V.Doc().createElement(bR);};V.IterSelector=function(bR,bS,bT){var bU,bV,bW;bU=bR.querySelectorAll(bS);for(bV=0,bW=bU.length-1;bV<=bW;bV++)bT(bU[bV]);};V.CreateText=function(bR){return V.Doc().createTextNode(bR);};V.InsertAt=function(bR,bS,bT){var bU;if(!(bT.parentNode===bR&&bS===(bU=bT.nextSibling,u.Equals(bU,null)?null:bU)))bR.insertBefore(bT,bS);};V.RemoveNode=function(bR,bS){if(bS.parentNode===bR)bR.removeChild(bS);};W.Static=function(bR){return new H({$:3,$0:bR});};W.Insert=function(bR,bS){var bT,bU,bV;function bW(bX){if(!(bX===null))if(bX!=null&&bX.$==1)bT.push(bX.$0);else if(bX!=null&&bX.$==2){bW(bX.$0);bW(bX.$1);}else if(bX!=null&&bX.$==3)bX.$0(bR);else if(bX!=null&&bX.$==4)bU.push(bX.$0);}bT=[];bU=[];bW(bS);bV=bT.slice(0);return bd.New(bR,W.Flags(bS),bV,bU.length===0?null:{$:1,$0:function(bX){A.iter(function(bY){bY(bX);},bU);}});};W.Updates=function(bR){return ba.MapTreeReduce(function(bS){return bS.NChanged();},P.Const(),P.Map2Unit,bR.DynNodes);};W.Empty=function(bR){return bd.New(bR,0,[],null);};W.AppendTree=function(bR,bS){var bT;return bR===null?bS:bS===null?bR:(bT=new H({$:2,$0:bR,$1:bS}),(W.SetFlags(bT,W.Flags(bR)|W.Flags(bS)),bT));};W.EmptyAttr=function(){bt.$cctor();return bt.EmptyAttr;};W.Flags=function(bR){return bR!==null&&bR.hasOwnProperty("flags")?bR.flags:0;};W.Dynamic=function(bR,bS){return new H({$:1,$0:new bv.New(bR,bS)});};W.HasExitAnim=function(bR){var bS;bS=2;return(bR.DynFlags&bS)===bS;};W.GetExitAnim=function(bR){return W.GetAnim(bR,function(bS,bT){return bS.NGetExitAnim(bT);});};W.HasEnterAnim=function(bR){var bS;bS=1;return(bR.DynFlags&bS)===bS;};W.GetEnterAnim=function(bR){return W.GetAnim(bR,function(bS,bT){return bS.NGetEnterAnim(bT);});};W.HasChangeAnim=function(bR){var bS;bS=4;return(bR.DynFlags&bS)===bS;};W.GetChangeAnim=function(bR){return W.GetAnim(bR,function(bS,bT){return bS.NGetChangeAnim(bT);});};W.SetFlags=function(bR,bS){bR.flags=bS;};W.GetAnim=function(bR,bS){return _9.Concat(m.map(function(bT){return bS(bT,bR.DynElem);},bR.DynNodes));};W.Sync=function(bR,bS){m.iter(function(bT){bT.NSync(bR);},bS.DynNodes);};Y.Int=function(){Y.set_counter(Y.counter()+1);return Y.counter();};Y.set_counter=function(bR){be.$cctor();be.counter=bR;};Y.counter=function(){be.$cctor();return be.counter;};Z.$cctor=function(){Z.$cctor=a.ignore;Z.LoadedTemplates=new x.New$5();Z.LocalTemplatesLoaded=false;Z.TextHoleRE="\\${([^}]+)}";};_1.$cctor=function(){_1.$cctor=a.ignore;_1.Doc=self.document;};_2.LinkElement=function(bR,bS){_2.InsertDoc(bR,bS,null);};_2.InsertDoc=function(bR,bS,bT){var bU;return bS!=null&&bS.$==1?_2.InsertNode(bR,bS.$0.El,bT):bS!=null&&bS.$==2?(bU=bS.$0,(bU.Dirty=false,_2.InsertDoc(bR,bU.Current,bT))):bS==null?bT:bS!=null&&bS.$==4?_2.InsertNode(bR,bS.$0.Text,bT):bS!=null&&bS.$==5?_2.InsertNode(bR,bS.$0,bT):bS!=null&&bS.$==6?m.foldBack(function(bV,bW){return bV==null||bV.constructor===I?_2.InsertDoc(bR,bV,bW):_2.InsertNode(bR,bV,bW);},bS.$0.Els,bT):_2.InsertDoc(bR,bS.$0,_2.InsertDoc(bR,bS.$1,bT));};_2.CreateRunState=function(bR,bS){return bl.New(bm.get_Empty(),_2.CreateElemNode(bR,W.EmptyAttr(),bS));};_2.PerformAnimatedUpdate=function(bR,bS,bT){var bU;return _9.get_UseAnimations()?(bU=null,br.Delay(function(){var bV,bW,bX;bV=bm.FindAll(bT);bW=_2.ComputeChangeAnim(bS,bV);bX=_2.ComputeEnterAnim(bS,bV);return br.Bind(_9.Play(_9.Append(bW,_2.ComputeExitAnim(bS,bV))),function(){return br.Bind(_2.SyncElemNodesNextFrame(bR,bS),function(){return br.Bind(_9.Play(bX),function(){bS.PreviousNodes=bV;return br.Return(null);});});});})):_2.SyncElemNodesNextFrame(bR,bS);};_2.PerformSyncUpdate=function(bR,bS,bT){var bU;bU=bm.FindAll(bT);_2.SyncElemNode(bR,bS.Top);bS.PreviousNodes=bU;};_2.InsertBeforeDelim=function(bR,bS){var bT,bU;bT=bR.parentNode;bU=self.document.createTextNode("");bT.insertBefore(bU,bR);_2.LinkPrevElement(bR,bS);return bU;};_2.InsertNode=function(bR,bS,bT){V.InsertAt(bR,bT,bS);return bS;};_2.CreateElemNode=function(bR,bS,bT){var bU;_2.LinkElement(bR,bT);bU=W.Insert(bR,bS);return _3.New(bU,bT,null,bR,Y.Int(),bM.GetOptional(bU.OnAfterRender));};_2.SyncElemNodesNextFrame=function(bR,bS){function bT(bU){a.requestAnimationFrame(function(){_2.SyncElemNode(bR,bS.Top);bU();});}return _.BatchUpdatesEnabled()?br.FromContinuations(function(bU,bV,bW){return bT.apply(null,[bU,bV,bW]);}):(_2.SyncElemNode(bR,bS.Top),br.Return(null));};_2.ComputeExitAnim=function(bR,bS){return _9.Concat(m.map(function(bT){return W.GetExitAnim(bT.Attr);},bm.ToArray(bm.Except(bS,bm.Filter(function(bT){return W.HasExitAnim(bT.Attr);},bR.PreviousNodes)))));};_2.ComputeEnterAnim=function(bR,bS){return _9.Concat(m.map(function(bT){return W.GetEnterAnim(bT.Attr);},bm.ToArray(bm.Except(bR.PreviousNodes,bm.Filter(function(bT){return W.HasEnterAnim(bT.Attr);},bS)))));};_2.ComputeChangeAnim=function(bR,bS){var bT;function bU(bV){return W.HasChangeAnim(bV.Attr);}bT=function(bV){return bm.Filter(bU,bV);};return _9.Concat(m.map(function(bV){return W.GetChangeAnim(bV.Attr);},bm.ToArray(bm.Intersect(bT(bR.PreviousNodes),bT(bS)))));};_2.SyncElemNode=function(bR,bS){!bR?_2.SyncElement(bS):void 0;_2.Sync(bS.Children);_2.AfterRender(bS);};_2.CreateTextNode=function(){return{Text:V.CreateText(""),Dirty:false,Value:""};};_2.UpdateTextNode=function(bR,bS){bR.Value=bS;bR.Dirty=true;};_2.LinkPrevElement=function(bR,bS){_2.InsertDoc(bR.parentNode,bS,bR);};_2.SyncElement=function(bR){function bS(bT){function bU(bV){var bW,bX;return bV!=null&&bV.$==0?bU(bV.$0)||bU(bV.$1):bV!=null&&bV.$==2?(bW=bV.$0,bW.Dirty||bU(bW.Current)):bV!=null&&bV.$==6&&(bX=bV.$0,bX.Dirty||m.exists(bS,bX.Holes));}return bU(bT.Children);}W.Sync(bR.El,bR.Attr);bS(bR)?_2.DoSyncElement(bR):void 0;};_2.Sync=function(bR){var bS,bT;if(bR!=null&&bR.$==1)_2.SyncElemNode(false,bR.$0);else if(bR!=null&&bR.$==2)_2.Sync(bR.$0.Current);else if(bR==null);else if(bR!=null&&bR.$==5);else if(bR!=null&&bR.$==4){bS=bR.$0;bS.Dirty?(bS.Text.nodeValue=bS.Value,bS.Dirty=false):void 0;}else if(bR!=null&&bR.$==6){bT=bR.$0;m.iter(function(bU){_2.SyncElemNode(false,bU);},bT.Holes);m.iter(function(bU){W.Sync(bU[0],bU[1]);},bT.Attrs);_2.AfterRender(bT);}else{_2.Sync(bR.$0);_2.Sync(bR.$1);}};_2.AfterRender=function(bR){var bS;bS=bM.GetOptional(bR.Render);bS!=null&&bS.$==1?(bS.$0(bR.El),bM.SetOptional(bR,"Render",null)):void 0;};_2.DoSyncElement=function(bR){var bS,bT,bU;function bV(bW,bX){var bY,bZ;return bW!=null&&bW.$==1?bW.$0.El:bW!=null&&bW.$==2?(bY=bW.$0,bY.Dirty?(bY.Dirty=false,_2.InsertDoc(bS,bY.Current,bX)):bV(bY.Current,bX)):bW==null?bX:bW!=null&&bW.$==4?bW.$0.Text:bW!=null&&bW.$==5?bW.$0:bW!=null&&bW.$==6?(bZ=bW.$0,(bZ.Dirty?bZ.Dirty=false:void 0,m.foldBack(function(b0,b1){return b0==null||b0.constructor===I?bV(b0,b1):b0;},bZ.Els,bX))):bV(bW.$0,bV(bW.$1,bX));}bS=bR.El;bD.Iter((bT=bR.El,function(bW){V.RemoveNode(bT,bW);}),bD.Except(bD.DocChildren(bR),bD.Children(bR.El,bM.GetOptional(bR.Delimiters))));bV(bR.Children,(bU=bM.GetOptional(bR.Delimiters),bU!=null&&bU.$==1?bU.$0[1]:null));};_3=h.DocElemNode=bM.Class({Equals:function(bR){return this.ElKey===bR.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_3);_3.New=function(bR,bS,bT,bU,bV,bW){var bX;return new _3((bX={Attr:bR,Children:bS,El:bU,ElKey:bV},(bM.SetOptional(bX,"Delimiters",bT),bM.SetOptional(bX,"Render",bW),bX)));};O.Obsolete=function(bR){var bS,bT,bU,bV,bW;bT=bR.s;if(bT==null||(bT!=null&&bT.$==2?(bS=bT.$1,false):bT!=null&&bT.$==3?(bS=bT.$1,false):true))void 0;else{bR.s=null;for(bU=0,bV=m.length(bS)-1;bU<=bV;bU++){bW=m.get(bS,bU);typeof bW=="object"?function(bX){O.Obsolete(bX);}(bW):bW();}}};O.New=function(bR){return{s:bR};};_5=h.Elt=bM.Class({},E,_5);_5.TreeNode=function(bR,bS){var bT,bU;function bV(bW){return bW[1];}bT=bj.Create(bS);return new _5.New$1({$:6,$0:bR},P.Map2Unit((bU=m.map(function(bW){return W.Updates(bV(bW));},bR.Attrs),ba.TreeReduce(P.Const(),P.Map2Unit,bU)),bT.v),m.get(bR.Els,0),bT);};_5.New=function(bR,bS,bT){var bU,bV;bU=_2.CreateElemNode(bR,bS,bT.docNode);bV=bj.Create(bT.updates);return new _5.New$1({$:1,$0:bU},P.Map2Unit(W.Updates(bU.Attr),bV.v),bR,bV);};_5.New$1=bM.Ctor(function(bR,bS,bT,bU){E.New.call(this,bR,bS);this.docNode$1=bR;this.updates$1=bS;this.elt=bT;this.rvUpdates=bU;},_5);P.Const=function(bR){var bS;bS=O.New({$:0,$0:bR});return function(){return bS;};};P.Sink=function(bR,bS){function bT(){O.WhenRun(bS(),bR,function(){br.scheduler().Fork(bT);});}br.scheduler().Fork(bT);};P.Map=function(bR,bS){return P.CreateLazy(function(){return O.Map(bR,bS());});};P.Map3=function(bR,bS,bT,bU){return P.CreateLazy(function(){return O.Map3(bR,bS(),bT(),bU());});};P.Sequence=function(bR){return P.CreateLazy(function(){return O.Sequence(A.map(function(bS){return bS();},bR));});};P.Map2=function(bR,bS,bT){return P.CreateLazy(function(){return O.Map2(bR,bS(),bT());});};P.Map2Unit=function(bR,bS){return P.CreateLazy(function(){return O.Map2Unit(bR(),bS());});};P.CreateLazy=function(bR){var bS;bS={c:null,o:bR};return function(){var bT,bU;bT=bS.c;return bT===null?(bT=bS.o(),bS.c=bT,(bU=bT.s,bU!=null&&bU.$==0)?bS.o=null:O.WhenObsoleteRun(bT,function(){bS.c=null;}),bT):bT;};};_6.convertTextNode=function(bR){var bS,bT,bU,bV,bW,bX;bS=null;bT=0;bV=bR.textContent;bW=new a.RegExp(D.TextHoleRE(),"g");while(bS=bW.exec(bV),bS!==null){bR.parentNode.insertBefore(self.document.createTextNode(_7.string(bV,{$:1,$0:bT},{$:1,$0:bW.lastIndex-m.get(bS,0).length-1})),bR);bT=bW.lastIndex;bX=self.document.createElement("span");bX.setAttribute("ws-replace",m.get(bS,1).toLowerCase());bR.parentNode.insertBefore(bX,bR);}bW.lastIndex=0;bR.textContent=_7.string(bV,{$:1,$0:bT},null);};_6.failNotLoaded=function(bR){bO.warn("Instantiating non-loaded template",bR);};_6.fillTextHole=function(bR,bS,bT){var bU;bU=bR.querySelector("[ws-replace]");return u.Equals(bU,null)?(bO.warn("Filling non-existent text hole",bT),null):(bU.parentNode.replaceChild(new a.Text(bS),bU),{$:1,$0:bU.getAttribute("ws-replace")});};_6.removeHolesExcept=function(bR,bS){function bT(bU){V.IterSelector(bR,"["+bU+"]",function(bV){if(!bS.Contains(bV.getAttribute(bU)))bV.removeAttribute(bU);});}bT("ws-attr");bT("ws-onafterrender");bT("ws-var");V.IterSelector(bR,"[ws-hole]",function(bU){if(!bS.Contains(bU.getAttribute("ws-hole"))){bU.removeAttribute("ws-hole");while(bU.hasChildNodes())bU.removeChild(bU.lastChild);}});V.IterSelector(bR,"[ws-replace]",function(bU){if(!bS.Contains(bU.getAttribute("ws-replace")))bU.parentNode.removeChild(bU);});V.IterSelector(bR,"[ws-on]",function(bU){bU.setAttribute("ws-on",bi.concat(" ",m.filter(function(bV){return bS.Contains(m.get(bi.SplitChars(bV,[":"],1),1));},bi.SplitChars(bU.getAttribute("ws-on"),[" "],1))));});V.IterSelector(bR,"[ws-attr-holes]",function(bU){var bV,bW,bX,bY,bZ;bV=bi.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=m.get(bV,bW);bU.setAttribute(bY,(bZ=new a.RegExp(D.TextHoleRE(),"g"),bU.getAttribute(bY).replace(bZ,function(b0,b1){return bS.Contains(b1)?b0:"";})));}});};_6.fillInstanceAttrs=function(bR,bS){var bT,bU,bV,bW,bX;_6.convertAttrs(bS);bT=bS.nodeName.toLowerCase();bU=bR.querySelector("[ws-attr="+bT+"]");if(u.Equals(bU,null))bO.warn("Filling non-existent attr hole",bT);else{bU.removeAttribute("ws-attr");for(bV=0,bW=bS.attributes.length-1;bV<=bW;bV++){bX=bS.attributes.item(bV);bX.name==="class"&&bU.hasAttribute("class")?bU.setAttribute("class",bU.getAttribute("class")+" "+bX.nodeValue):bU.setAttribute(bX.name,bX.nodeValue);}}};_6.mapHoles=function(bR,bS){function bT(bU){V.IterSelector(bR,"["+bU+"]",function(bV){var bW,bX;bW=(bX=null,[bS.TryGetValue(bV.getAttribute(bU).toLowerCase(),{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);bW[0]?bV.setAttribute(bU,bW[1]):void 0;});}bT("ws-hole");bT("ws-replace");bT("ws-attr");bT("ws-onafterrender");bT("ws-var");V.IterSelector(bR,"[ws-on]",function(bU){bU.setAttribute("ws-on",bi.concat(" ",m.map(function(bV){var bW,bX,bY;bW=bi.SplitChars(bV,[":"],1);bX=(bY=null,[bS.TryGetValue(m.get(bW,1),{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);return bX[0]?m.get(bW,0)+":"+bX[1]:bV;},bi.SplitChars(bU.getAttribute("ws-on"),[" "],1))));});V.IterSelector(bR,"[ws-attr-holes]",function(bU){var bV,bW,bX;bV=bi.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++)(function(){var bY;function bZ(b0,b1){var b2;b2=f.KeyValue(b1);return b0.replace(new a.RegExp("\\${"+b2[0]+"}","ig"),"${"+b2[1]+"}");}bY=m.get(bV,bW);return bU.setAttribute(bY,(((bM.Curried3(A.fold))(bZ))(bU.getAttribute(bY)))(bS));}());});};_6.fill=function(bR,bS,bT){while(true)if(bR.hasChildNodes())bT=bS.insertBefore(bR.lastChild,bT);else return null;};_6.convertAttrs=function(bR){var bT,bU,bV,bW,bX,bY,bZ,b0;function bS(b1){var b2;b2=bR.getAttribute(b1);b2===null?void 0:bR.setAttribute(b1,b2.toLowerCase());}bT=bR.attributes;bU=[];bV=[];bW=[];for(bX=0,bY=bT.length-1;bX<=bY;bX++){bZ=bT.item(bX);bi.StartsWith(bZ.nodeName,"ws-on")&&bZ.nodeName!=="ws-onafterrender"&&bZ.nodeName!=="ws-on"?(bU.push(bZ.nodeName),bV.push(_7.string(bZ.nodeName,{$:1,$0:"ws-on".length},null)+":"+bZ.nodeValue.toLowerCase())):!bi.StartsWith(bZ.nodeName,"ws-")&&(new a.RegExp(D.TextHoleRE())).test(bZ.nodeValue)?(bZ.nodeValue=(b0=new a.RegExp(D.TextHoleRE(),"g"),bZ.nodeValue.replace(b0,function(b1,b2){return"${"+b2.toLowerCase()+"}";})),bW.push(bZ.nodeName)):void 0;}!(bV.length==0)?bR.setAttribute("ws-on",bi.concat(" ",bV)):void 0;!(bW.length==0)?bR.setAttribute("ws-attr-holes",bi.concat(" ",bW)):void 0;bS("ws-hole");bS("ws-replace");bS("ws-attr");bS("ws-onafterrender");bS("ws-var");m.iter(function(b1){bR.removeAttribute(b1);},bU);};_7.string=function(bR,bS,bT){return bS==null?bT!=null&&bT.$==1?bR.slice(0,bT.$0+1):"":bT==null?bR.slice(bS.$0):bR.slice(bS.$0,bT.$0+1);};A.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};_8=s.KeyCollection=bM.Class({GetEnumerator$1:function(){return K.Get(A.map(function(bR){return bR.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,_8);_8.New=bM.Ctor(function(bR){g.New.call(this);this.d=bR;},_8);_9.get_UseAnimations=function(){return bn.UseAnimations();};_9.Play=function(bR){var bS;bS=null;return br.Delay(function(){return br.Bind(_9.Run(a.ignore,bn.Actions(bR)),function(){bn.Finalize(bR);return br.Return(null);});});};_9.Append=function(bR,bS){return{$:0,$0:bs.Append(bR.$0,bS.$0)};};_9.Run=function(bR,bS){var bT;function bU(bV){function bW(bX,bY){var bZ;bZ=bY-bX;bS.Compute(bZ);bR();return bZ<=bT?void a.requestAnimationFrame(function(b0){bW(bX,b0);}):bV();}a.requestAnimationFrame(function(bX){bW(bX,bX);});}bT=bS.Duration;return bT===0?br.Zero():br.FromContinuations(function(bV,bW,bX){return bU.apply(null,[bV,bW,bX]);});};_9.Concat=function(bR){return{$:0,$0:bs.Concat(A.map(bn.List,bR))};};_9.get_Empty=function(){return{$:0,$0:bs.Empty()};};_.BatchUpdatesEnabled=function(){bo.$cctor();return bo.BatchUpdatesEnabled;};$.StartProcessor=function(bR){var bS;function bT(){var bU;bU=null;return br.Delay(function(){return br.Bind(bR,function(){var bV;bV=bS[0];return bV===1?(bS[0]=0,br.Zero()):bV===2?(bS[0]=1,bT()):br.Zero();});});}bS=[0];return function(){var bU;bU=bS[0];bU===0?(bS[0]=1,br.Start(bT(),null)):bU===1?bS[0]=2:void 0;};};ba.ofSeqNonCopying=function(bR){var bS,bT;if(bR instanceof a.Array)return bR;else if(bR instanceof bh)return m.ofList(bR);else if(bR===null)return[];else{bS=[];bT=K.Get(bR);try{while(bT.MoveNext())bS.push(bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}}};ba.TreeReduce=function(bR,bS,bT){var bU;function bV(bW,bX){var bY,bZ;return bX<=0?bR:bX===1&&(bW>=0&&bW<bU)?m.get(bT,bW):(bZ=bX/2>>0,bS(bV(bW,bZ),bV(bW+bZ,bX-bZ)));}bU=m.length(bT);return bV(0,bU);};ba.MapTreeReduce=function(bR,bS,bT,bU){var bV;function bW(bX,bY){var bZ,b0;return bY<=0?bS:bY===1&&(bX>=0&&bX<bV)?bR(m.get(bU,bX)):(b0=bY/2>>0,bT(bW(bX,b0),bW(bX+b0,bY-b0)));}bV=m.length(bU);return bW(0,bV);};bb.concat=function(bR){var bS,bT;bS=[];for(var bU in bR)bS.push.apply(bS,bR[bU]);return bS;};bd.New=function(bR,bS,bT,bU){var bV;bV={DynElem:bR,DynFlags:bS,DynNodes:bT};bM.SetOptional(bV,"OnAfterRender",bU);return bV;};be.$cctor=function(){be.$cctor=a.ignore;be.counter=0;};bf.Handler=function(bR,bS){return W.Static(function(bT){bT.addEventListener(bR,function(bU){return(bS(bT))(bU);},false);});};bf.OnAfterRender=function(bR){return new H({$:4,$0:bR});};bf.Value=function(bR){function bS(bT){return{$:1,$0:bT};}return bf.CustomValue(bR,a.id,function(bT){return bS(a.id(bT));});};bf.Checked=function(bR){function bS(bT,bU){return!u.Equals(bR.Get(),bT.checked)?bR.Set(bT.checked):null;}return H.Concat([bf.DynamicProp("checked",bR.get_View()),bf.Handler("change",function(bT){return function(bU){return bS(bT,bU);};})]);};bf.IntValue=function(bR){return bf.CustomVar(bR,function(bS,bT){var bU;bU=bT.get_Input();return bS.value!==bU?void(bS.value=bU):null;},function(bS){var bT,bU,bV;bT=bS.value;return{$:1,$0:bp.isBlank(bT)?(bS.checkValidity?bS.checkValidity():true)?new Q({$:2,$0:bT}):new Q({$:1,$0:bT}):(bU=(bV=0,[R.TryParseInt32(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]),bU[0]?new Q({$:0,$0:bU[1],$1:bT}):new Q({$:1,$0:bT}))};});};bf.IntValueUnchecked=function(bR){return bf.CustomValue(bR,a.String,function(bS){var bT;return bp.isBlank(bS)?{$:1,$0:0}:(bT=+bS,bT!==bT>>0?null:{$:1,$0:bT});});};bf.FloatValue=function(bR){return bf.CustomVar(bR,function(bS,bT){var bU;bU=bT.get_Input();return bS.value!==bU?void(bS.value=bU):null;},function(bS){var bT,bU;bT=bS.value;return{$:1,$0:bp.isBlank(bT)?(bS.checkValidity?bS.checkValidity():true)?new Q({$:2,$0:bT}):new Q({$:1,$0:bT}):(bU=+bT,a.isNaN(bU)?new Q({$:1,$0:bT}):new Q({$:0,$0:bU,$1:bT}))};});};bf.FloatValueUnchecked=function(bR){return bf.CustomValue(bR,a.String,function(bS){var bT;return bp.isBlank(bS)?{$:1,$0:0}:(bT=+bS,a.isNaN(bT)?null:{$:1,$0:bT});});};bf.Dynamic=function(bR,bS){return W.Dynamic(bS,function(bT){return function(bU){return V.SetAttr(bT,bR,bU);};});};bf.CustomValue=function(bR,bS,bT){return bf.CustomVar(bR,function(bU,bV){bU.value=bS(bV);},function(bU){return bT(bU.value);});};bf.DynamicProp=function(bR,bS){return W.Dynamic(bS,function(bT){return function(bU){bT[bR]=bU;};});};bf.CustomVar=function(bR,bS,bT){function bU(bW,bX){return bR.UpdateMaybe(function(bY){var bZ,b0;bZ=bT(bW);return bZ!=null&&bZ.$==1&&(!u.Equals(bZ.$0,bY)&&(b0=[bZ,bZ.$0],true))?b0[0]:null;});}function bV(bW,bX){var bY,bZ;bY=bT(bW);return bY!=null&&bY.$==1&&(u.Equals(bY.$0,bX)&&(bZ=bY.$0,true))?null:bS(bW,bX);}return H.Concat([bf.Handler("change",function(bW){return function(bX){return bU(bW,bX);};}),bf.Handler("input",function(bW){return function(bX){return bU(bW,bX);};}),bf.Handler("keypress",function(bW){return function(bX){return bU(bW,bX);};}),bf.DynamicCustom(function(bW){return function(bX){return bV(bW,bX);};},bR.get_View())]);};bf.DynamicCustom=function(bR,bS){return W.Dynamic(bS,bR);};bh=bg.T=bM.Class({GetEnumerator:function(){return new L.New(this,null,function(bR){var bS;bS=bR.s;return bS.$==0?false:(bR.c=bS.$0,bR.s=bS.$1,true);},void 0);},GetEnumerator0:function(){return K.Get(this);}},null,bh);bh.Empty=new bh({$:0});bi.concat=function(bR,bS){return m.ofSeq(bS).join(bR);};bi.SplitChars=function(bR,bS,bT){return bi.Split(bR,new a.RegExp("["+bi.RegexEscape(bS.join(""))+"]"),bT);};bi.StartsWith=function(bR,bS){return bR.substring(0,bS.length)==bS;};bi.Split=function(bR,bS,bT){return bT===1?m.filter(function(bU){return bU!=="";},bi.SplitWith(bR,bS)):bi.SplitWith(bR,bS);};bi.RegexEscape=function(bR){return bR.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bi.forall=function(bR,bS){return A.forall(bR,bi.protect(bS));};bi.SplitWith=function(bR,bS){return bR.split(bS);};bi.protect=function(bR){return bR===null?"":bR;};bj=h.Updates=bM.Class({},null,bj);bj.Create=function(bR){var bS;bS=null;bS=bj.New(bR,null,function(){var bT;bT=bS.s;return bT===null?(bT=O.Copy(bS.c()),bS.s=bT,O.WhenObsoleteRun(bT,function(){bS.s=null;}),bT):bT;});return bS;};bj.New=function(bR,bS,bT){return new bj({c:bR,s:bS,v:bT});};bl.New=function(bR,bS){return{PreviousNodes:bR,Top:bS};};bm.get_Empty=function(){return{$:0,$0:new y.New$3()};};bm.FindAll=function(bR){var bS;function bT(bV){if(bV!=null&&bV.$==0){bT(bV.$0);bT(bV.$1);}else if(bV!=null&&bV.$==1)bU(bV.$0);else if(bV!=null&&bV.$==2)bT(bV.$0.Current);else if(bV!=null&&bV.$==6)m.iter(bU,bV.$0.Holes);}function bU(bV){bS.push(bV);bT(bV.Children);}bS=[];bT(bR);return{$:0,$0:new y.New$2(bS)};};bm.Filter=function(bR,bS){return{$:0,$0:bA.Filter(bR,bS.$0)};};bm.Except=function(bR,bS){return{$:0,$0:bA.Except(bR.$0,bS.$0)};};bm.ToArray=function(bR){return bA.ToArray(bR.$0);};bm.Intersect=function(bR,bS){return{$:0,$0:bA.Intersect(bR.$0,bS.$0)};};bn.UseAnimations=function(){bq.$cctor();return bq.UseAnimations;};bn.Actions=function(bR){return bn.ConcatActions(m.choose(function(bS){return bS.$==1?{$:1,$0:bS.$0}:null;},bs.ToArray(bR.$0)));};bn.Finalize=function(bR){m.iter(function(bS){if(bS.$==0)bS.$0();},bs.ToArray(bR.$0));};bn.ConcatActions=function(bR){var bS,bT,bU,bV;bS=ba.ofSeqNonCopying(bR);bT=m.length(bS);return bT===0?bn.Const():bT===1?m.get(bS,0):(bU=A.max(A.map(function(bW){return bW.Duration;},bS)),(bV=m.map(function(bW){return bn.Prolong(bU,bW);},bS),bn.Def(bU,function(bW){m.iter(function(bX){bX.Compute(bW);},bV);})));};bn.List=function(bR){return bR.$0;};bn.Const=function(bR){return bn.Def(0,function(){return bR;});};bn.Def=function(bR,bS){return{Compute:bS,Duration:bR};};bn.Prolong=function(bR,bS){var bT,bU,bV;bT=bS.Compute;bU=bS.Duration;bV=bG.Create(function(){return bS.Compute(bS.Duration);});return{Compute:function(bW){return bW>=bU?bV.f():bT(bW);},Duration:bR};};bo.$cctor=function(){bo.$cctor=a.ignore;bo.BatchUpdatesEnabled=true;};bp.isBlank=function(bR){return bi.forall(bu.IsWhiteSpace,bR);};bq.$cctor=function(){bq.$cctor=a.ignore;bq.CubicInOut=bw.Custom(function(bR){var bS;bS=bR*bR;return 3*bS-2*(bS*bR);});bq.UseAnimations=true;};br.Delay=function(bR){return function(bS){try{(bR(null))(bS);}catch(bT){bS.k({$:1,$0:bT});}};};br.Bind=function(bR,bS){return br.checkCancel(function(bT){bR(bx.New(function(bU){var bV;if(bU.$==0){bV=bU.$0;br.scheduler().Fork(function(){try{(bS(bV))(bT);}catch(bW){bT.k({$:1,$0:bW});}});}else br.scheduler().Fork(function(){bT.k(bU);});},bT.ct));});};br.Zero=function(){by.$cctor();return by.Zero;};br.Start=function(bR,bS){var bT,bU;bT=(bU=(br.defCTS())[0],bS==null?bU:bS.$0);br.scheduler().Fork(function(){if(!bT.c)bR(bx.New(function(bV){if(bV.$==1)br.UncaughtAsyncError(bV.$0);},bT));});};br.Return=function(bR){return function(bS){bS.k({$:0,$0:bR});};};br.checkCancel=function(bR){return function(bS){if(bS.ct.c)br.cancel(bS);else bR(bS);};};br.defCTS=function(){by.$cctor();return by.defCTS;};br.UncaughtAsyncError=function(bR){bO.log("WebSharper: Uncaught asynchronous exception",bR);};br.FromContinuations=function(bR){return function(bS){var bT;function bU(bV){if(bT[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bT[0]=true;br.scheduler().Fork(bV);}}bT=[false];bR(function(bV){bU(function(){bS.k({$:0,$0:bV});});},function(bV){bU(function(){bS.k({$:1,$0:bV});});},function(bV){bU(function(){bS.k({$:2,$0:bV});});});};};br.cancel=function(bR){bR.k({$:2,$0:new bF.New(bR.ct)});};br.scheduler=function(){by.$cctor();return by.scheduler;};bs.Append=function(bR,bS){return bR.$==0?bS:bS.$==0?bR:{$:2,$0:bR,$1:bS};};bs.ToArray=function(bR){var bS;function bT(bU){if(bU.$==1)bS.push(bU.$0);else if(bU.$==2){bT(bU.$0);bT(bU.$1);}else if(bU.$==3)m.iter(function(bV){bS.push(bV);},bU.$0);}bS=[];bT(bR);return bS.slice(0);};bs.Concat=function(bR){var bS;bS=ba.ofSeqNonCopying(bR);return ba.TreeReduce(bs.Empty(),bs.Append,bS);};bs.Empty=function(){bH.$cctor();return bH.Empty;};bg.head=function(bR){return bR.$==1?bR.$0:bg.listEmpty();};bg.tail=function(bR){return bR.$==1?bR.$1:bg.listEmpty();};bg.listEmpty=function(){return f.FailWith("The input list was empty.");};bt.$cctor=function(){bt.$cctor=a.ignore;bt.EmptyAttr=null;};bu.IsWhiteSpace=function(bR){return bR.match(new a.RegExp("\\s"))!==null;};R.TryParse=function(bR,bS,bT,bU){var bV,bW;bV=+bR;bW=bV===bV-bV%1&&bV>=bS&&bV<=bT;bW?bU.set(bV):void 0;return bW;};bv=h.DynamicAttrNode=bM.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bR){return _9.get_Empty();},NGetEnterAnim:function(bR){return _9.get_Empty();},NGetChangeAnim:function(bR){return _9.get_Empty();},NSync:function(bR){if(this.dirty){(this.push(bR))(this.value);this.dirty=false;}}},g,bv);bv.New=bM.Ctor(function(bR,bS){var bT;bT=this;g.New.call(this);this.push=bS;this.value=void 0;this.dirty=false;this.updates=P.Map(function(bU){bT.value=bU;bT.dirty=true;},bR);},bv);bw=h.Easing=bM.Class({},g,bw);bw.Custom=function(bR){return new bw.New(bR);};bw.New=bM.Ctor(function(bR){g.New.call(this);this.transformTime=bR;},bw);bx.New=function(bR,bS){return{k:bR,ct:bS};};by.$cctor=function(){by.$cctor=a.ignore;by.noneCT=bz.New(false,[]);by.scheduler=new bB.New();by.defCTS=[new bC.New()];by.Zero=br.Return();by.GetCT=function(bR){bR.k({$:0,$0:bR.ct});};};bz.New=function(bR,bS){return{c:bR,r:bS};};bA.Filter=function(bR,bS){return new y.New$2(m.filter(bR,bA.ToArray(bS)));};bA.Except=function(bR,bS){var bT;bT=new y.New$2(bA.ToArray(bS));bT.ExceptWith(bA.ToArray(bR));return bT;};bA.ToArray=function(bR){var bS;bS=m.create(bR.get_Count(),void 0);bR.CopyTo(bS);return bS;};bA.Intersect=function(bR,bS){var bT;bT=new y.New$2(bA.ToArray(bR));bT.IntersectWith(bA.ToArray(bS));return bT;};bB=br.Scheduler=bM.Class({Fork:function(bR){var bS;bS=this;this.robin.push(bR);this.idle?(this.idle=false,a.setTimeout(function(){bS.tick();},0)):void 0;},tick:function(){var bR,bS,bT;bS=this;bT=bQ.now();bR=true;while(bR)if(this.robin.length===0){this.idle=true;bR=false;}else{(this.robin.shift())();bQ.now()-bT>40?(a.setTimeout(function(){bS.tick();},0),bR=false):void 0;}}},g,bB);bB.New=bM.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},bB);bC=b.CancellationTokenSource=bM.Class({},g,bC);bC.New=bM.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bC);bD.Children=function(bR,bS){var bT,bU,bV;if(bS!=null&&bS.$==1){bV=[];bT=bS.$0[0].nextSibling;while(bT!==bS.$0[1]){bV.push(bT);bT=bT.nextSibling;}return{$:0,$0:bV};}else return{$:0,$0:m.init(bR.childNodes.length,(bU=bR.childNodes,function(bW){return bU[bW];}))};};bD.Except=function(bR,bS){var bT;bT=bR.$0;return{$:0,$0:m.filter(function(bU){return m.forall(function(bV){return!(bU===bV);},bT);},bS.$0)};};bD.Iter=function(bR,bS){m.iter(bR,bS.$0);};bD.DocChildren=function(bR){var bS;function bT(bU){if(bU!=null&&bU.$==2)bT(bU.$0.Current);else if(bU!=null&&bU.$==1)bS.push(bU.$0.El);else if(bU==null);else if(bU!=null&&bU.$==5)bS.push(bU.$0);else if(bU!=null&&bU.$==4)bS.push(bU.$0.Text);else if(bU!=null&&bU.$==6)m.iter(function(bV){if(bV==null||bV.constructor===I)bT(bV);else bS.push(bV);},bU.$0.Els);else{bT(bU.$0);bT(bU.$1);}}bS=[];bT(bR.Children);return{$:0,$0:ba.ofSeqNonCopying(bS)};};bF=b.OperationCanceledException=bM.Class({},bE,bF);bF.New=bM.Ctor(function(bR){bF.New$1.call(this,"The operation was canceled.",null,bR);},bF);bF.New$1=bM.Ctor(function(bR,bS,bT){this.message=bR;this.inner=bS;I.setPrototypeOf(this,bF.prototype);this.ct=bT;},bF);bG.Create=function(bR){return bK.New(false,bR,bG.forceLazy);};bG.forceLazy=function(){var bR;bR=this.v();this.c=true;this.v=bR;this.f=bG.cachedLazy;return bR;};bG.cachedLazy=function(){return this.v;};bH.$cctor=function(){bH.$cctor=a.ignore;bH.Empty={$:0};};bI.Clear=function(bR){bR.splice(0,m.length(bR));};bK.New=function(bR,bS,bT){return{c:bR,v:bS,f:bT};};bM.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
